Cursor-specific pro-tips
â€œ/explain selectionâ€ on autogenerated code; if the summary feels wrong, the code likely is.

Code Sensors: add a sensor on backend/app/services/whisper_client.py that flags any new network call when MODE=="DEV" â€” prevents secret-leak accidents.

Autotests: let Cursor generate tests right after you paste new routes; keeps coverage climbing effortlessly.

Ghost docs: use the /** â€¦ @public */ VS Code docblock style so Cursorâ€™s inline doc view surfaces your intent while vibe-coding.

Minimum green-light criteria before demo
95 % unit-test pass rate (stubbed external calls).

â‰¤ 350 ms P95 for /transcribe response using fake data.

PDF delivered + DB purged in â‰¤ 5 min of session end (simulated).

No hardcoded secrets detected by git grep -I --password.

READMEâ€™s â€œQuick Startâ€ actually works on a fresh clone.




| Layer | What to prove works | Quick self-test (copy-paste into Cursor Chat) | Typical ğŸ”´ failure & fix |
|-------|--------------------|----------------------------------------------|--------------------------|
| **0 Â· Repo & Runtime** | Local dev + `docker compose up` bring up FastAPI, Postgres, React, and proxy in < 2 min. | **Ask:** â€œRun the full compose build; return container health & exposed URLs.â€ | Ports collide â†’ adjust `.env`; missing `ALLOWED_ORIGINS` CORS list. |
| **1 Â· Unit / Contract** | All pure-python & pure-TS functions pass `pytest` / `vitest`. | â€œGenerate a summary table of failing tests after `pytest -q`.â€ | Whisper/GPT client timeout â†’ inject `settings.MODE=DEV` stub. |
| **2 Â· Service Integration** | â¶ `POST /transcribe` returns text for a 3 s WAVâ€ƒâ· `POST /summarize` returns JSON with keys `chief_complaint`, `risk_flags`â€ƒâ¸ DB row count â†‘ after each answer. | â€œCall the three endpoints in sequence with dummy audio; print outputs.â€ | Media type mismatch (`audio/webm`) â†’ convert to WAV before upload. |
| **3 Â· End-to-End UX** | Browser flow: record â†’ transcript shows â‰¤ 3 s â†’ next question auto-loads; language toggle instantly re-renders UI. | â€œLaunch Storybook; cycle through QuestionFlow component states.â€ | Safari wonâ€™t start `MediaRecorder` â†’ fallback to `audioType: 'audio.mp4'`. |
| **4 Â· Privacy & Compliance** | â¶ `vaporize_after` set on session createâ€ƒâ· background purger deletes rows and associated blobsâ€ƒâ¸ `GET /report.pdf` streams < 2 MB file, then marks session as delivered. | â€œInvoke purge task manually; show remaining rows + file handles.â€ | Task not running (gunicorn vs uvicorn) â†’ add `lifespan='on'` in FastAPI. |
