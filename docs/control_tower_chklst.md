Cursor-specific pro-tips
“/explain selection” on autogenerated code; if the summary feels wrong, the code likely is.

Code Sensors: add a sensor on backend/app/services/whisper_client.py that flags any new network call when MODE=="DEV" — prevents secret-leak accidents.

Autotests: let Cursor generate tests right after you paste new routes; keeps coverage climbing effortlessly.

Ghost docs: use the /** … @public */ VS Code docblock style so Cursor’s inline doc view surfaces your intent while vibe-coding.

Minimum green-light criteria before demo
95 % unit-test pass rate (stubbed external calls).

≤ 350 ms P95 for /transcribe response using fake data.

PDF delivered + DB purged in ≤ 5 min of session end (simulated).

No hardcoded secrets detected by git grep -I --password.

README’s “Quick Start” actually works on a fresh clone.




| Layer | What to prove works | Quick self-test (copy-paste into Cursor Chat) | Typical 🔴 failure & fix |
|-------|--------------------|----------------------------------------------|--------------------------|
| **0 · Repo & Runtime** | Local dev + `docker compose up` bring up FastAPI, Postgres, React, and proxy in < 2 min. | **Ask:** “Run the full compose build; return container health & exposed URLs.” | Ports collide → adjust `.env`; missing `ALLOWED_ORIGINS` CORS list. |
| **1 · Unit / Contract** | All pure-python & pure-TS functions pass `pytest` / `vitest`. | “Generate a summary table of failing tests after `pytest -q`.” | Whisper/GPT client timeout → inject `settings.MODE=DEV` stub. |
| **2 · Service Integration** | ❶ `POST /transcribe` returns text for a 3 s WAV ❷ `POST /summarize` returns JSON with keys `chief_complaint`, `risk_flags` ❸ DB row count ↑ after each answer. | “Call the three endpoints in sequence with dummy audio; print outputs.” | Media type mismatch (`audio/webm`) → convert to WAV before upload. |
| **3 · End-to-End UX** | Browser flow: record → transcript shows ≤ 3 s → next question auto-loads; language toggle instantly re-renders UI. | “Launch Storybook; cycle through QuestionFlow component states.” | Safari won’t start `MediaRecorder` → fallback to `audioType: 'audio.mp4'`. |
| **4 · Privacy & Compliance** | ❶ `vaporize_after` set on session create ❷ background purger deletes rows and associated blobs ❸ `GET /report.pdf` streams < 2 MB file, then marks session as delivered. | “Invoke purge task manually; show remaining rows + file handles.” | Task not running (gunicorn vs uvicorn) → add `lifespan='on'` in FastAPI. |
